#!/bin/bash

SUFFIX="lulesh"
MAX_POL=1
PROC_BIND="close"
PLACES=cores
WAIT_POL="active"
APOLLO_PERIOD=10000
THREAD_CAP=36
POLICY="Random"

OMP_NUM_THREADS=$THREAD_CAP \
OMP_WAIT_POLICY=$WAIT_POL \
OMP_PROC_BIND=$PROC_BIND \
OMP_PLACES=$PLACES \
APOLLO_TRACE_CSV_FOLDER_SUFFIX="-$SUFFIX" \
APOLLO_COLLECTIVE_TRAINING=0 \
APOLLO_LOCAL_TRAINING=1 \
APOLLO_RETRAIN_ENABLE=0 \
APOLLO_INIT_MODEL=$POLICY \
APOLLO_STORE_MODELS=0 \
APOLLO_TRACE_CSV=1 \
APOLLO_GLOBAL_TRAIN_PERIOD=$APOLLO_PERIOD \
APOLLO_ENABLE_PERF_CNTRS=0 \
APOLLO_PERF_CNTRS_MLTPX=1 \
APOLLO_PERF_CNTRS="PAPI_DP_OPS,PAPI_SP_OPS" \
srun -n1 -N1 --export=ALL ./lulesh2.0 -s 30 -r 100 -b 0 -c 0 -i 1000

#gdb -e ./lulesh2.0 -ex "r -s 30 -r 100 -b 0 -c 0 -i 1000"
#APOLLO_PER_REGION_TRAIN_PERIOD=50 \

#APOLLO_PERF_CNTRS="PAPI_DP_OPS,PAPI_TOT_INS" \

